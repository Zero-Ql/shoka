{
    "version": "https://jsonfeed.org/version/1",
    "title": "上善若水 • All posts by \"frp\" tag",
    "description": "若能避开猛烈的欢喜，自然也不会有悲痛的来袭.",
    "home_page_url": "http://yunyat.cloud",
    "items": [
        {
            "id": "http://yunyat.cloud/miscellaneous/windows/%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACwin%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%BF%9E%E6%8E%A5/",
            "url": "http://yunyat.cloud/miscellaneous/windows/%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%ACwin%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E8%BF%9E%E6%8E%A5/",
            "title": "任意版本win远程桌面使用内网穿透连接",
            "date_published": "2023-11-28T14:56:44.000Z",
            "content_html": "<h3 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h3>\n<div class=\"note info\">\n<p><b>重要</b>：请不要问我为什么不能访问 GitHub 网站这种问题</p>\n</div>\n<p>win 系统并不能使用 ssh 来连接，但是可以使用 win 自带的远程桌面来连接。</p>\n<p>但是，这时候就出现了一个问题，只有专业版的 win 系统能被远程连接，家庭版的并不行，但是不要方，GitHub 有大佬开源了 win 远程桌面的补丁，使得家庭版的 win 系统也能被远程连接。</p>\n<hr>\n<h3 id=\"下载补丁\"><a class=\"markdownIt-Anchor\" href=\"#下载补丁\">#</a> 下载补丁</h3>\n<p>补丁存储库：</p>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3N0YXNjb3JwL3JkcHdyYXAvcmVsZWFzZXM=\">Releases · stascorp/rdpwrap (github.com)</span></p>\n<p>直接下载 zip 压缩包即可</p>\n</blockquote>\n<h3 id=\"运行\"><a class=\"markdownIt-Anchor\" href=\"#运行\">#</a> 运行</h3>\n<ol>\n<li>解压下载的补丁压缩包</li>\n<li>以管理员权限运行  <code>install.bat</code> ，不会运行的右键，然后点击 “以管理员身份运行” 。</li>\n<li>此时打开补丁文件夹里的  <code>RDPConf.exe</code> ，不出意外的话会显示如下图所示的红色字体。</li>\n</ol>\n<p><img data-src=\"https://z1.ax1x.com/2023/11/28/piDMKUK.jpg\" alt=\"2\"></p>\n<ol start=\"4\">\n<li>按键盘的  <code>win + x</code>  组合键，然后选择计算机管理或按  <code>G</code>  键，依次点击  <code>服务和应用程序 -&gt; 服务</code> ，然后在里面找到  <code>Remote Desktop Services</code> （如下图所示），先点击 “停止” 。</li>\n</ol>\n<p><img data-src=\"https://z1.ax1x.com/2023/11/28/piDMM4O.jpg\" alt=\"1\"></p>\n<ol start=\"5\">\n<li>为了方便，我写了一个自动部署的脚本，运行  <code>run.bat</code>  即可，在弹出的 UAC 窗口点击是。</li>\n</ol>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d2R0LmxhbnpvdXQuY29tL2lWcWJyMWc5M2I4ag==\">点击下载脚本</span></p>\n</blockquote>\n<ol start=\"6\">\n<li>\n<p>运行完脚本按照步骤 4 重新启动一下服务。</p>\n</li>\n<li>\n<p>重启完服务然后打开  <code>RDPConf.exe</code> ，如果全部变绿了就已经弄好了。</p>\n</li>\n</ol>\n<p><img data-src=\"https://z1.ax1x.com/2023/11/28/piDMuE6.jpg\" alt=\"3\"></p>\n<h3 id=\"frp-内网穿透\"><a class=\"markdownIt-Anchor\" href=\"#frp-内网穿透\">#</a> frp 内网穿透</h3>\n<p><code>frp</code>  内穿我之前写过教程，这里只需要在需要内穿的客户端配置就行。</p>\n<ol>\n<li>先下载 win 系统的  <code>frp</code>  压缩包。</li>\n</ol>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2ZhdGVkaWVyL2ZycC9yZWxlYXNlcw==\">下载地址</span></p>\n</blockquote>\n<div class=\"note warning\">\n<p>不要下错了，下载  <code>windows_amd64</code>  的， <code>arm64</code>  是给手机处理器用的。</p>\n</div>\n<ol start=\"2\">\n<li>下载完之后，解压打开  <code>frpc.toml</code>  配置文件。</li>\n</ol>\n<p>照着我的配置文件写就行。</p>\n<figure class=\"highlight toml\"><figcaption data-lang=\"TOML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 填你公网服务器的 ip 地址</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key property\">serverAddr</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 填你公网服务器上的 frps 配置文件里写的端口号</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key property\">serverPort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">7000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 设置了 token 的可以填一下</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># token</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token table class-name\">proxies</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 你要内穿的服务名，随便填，你自己认识就行</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"desktop\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 你要穿透的服务使用的协议，一般默认就行</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token key property\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"tcp\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 你要穿透的服务所在的机器的 ip ，默认就行</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token key property\">localIP</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1\"</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 你要穿透的服务所使用的端口号</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token key property\">localPort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">3389</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 你服务器监听的端口号，</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token key property\">remotePort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">6000</span></pre></td></tr></table></figure><ol start=\"3\">\n<li>\n<p>弄好之后在当前目录右键，在终端中打开，输入以下命令。</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>frpc <span class=\"token operator\">-</span>c <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>frpc<span class=\"token punctuation\">.</span>toml</pre></td></tr></table></figure></li>\n<li>\n<p>显示下面的代码就是启动好了</p>\n</li>\n</ol>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>2023/11/28 22:51:54 <span class=\"token namespace\">[I]</span> <span class=\"token namespace\">[root.go:139]</span> <span class=\"token function\">start</span> frpc service <span class=\"token keyword\">for</span> config file <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span>\\frpc<span class=\"token punctuation\">.</span>toml<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>2023/11/28 22:51:56 <span class=\"token namespace\">[I]</span> <span class=\"token namespace\">[service.go:299]</span> <span class=\"token namespace\">[c18837c64f3317f9]</span> login to server success<span class=\"token punctuation\">,</span> get run id <span class=\"token namespace\">[c18837c64f3317f9]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>2023/11/28 22:51:56 <span class=\"token namespace\">[I]</span> <span class=\"token namespace\">[proxy_manager.go:156]</span> <span class=\"token namespace\">[c18837c64f3317f9]</span> proxy added: <span class=\"token namespace\">[desktop]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>2023/11/28 22:51:56 <span class=\"token namespace\">[I]</span> <span class=\"token namespace\">[control.go:173]</span> <span class=\"token namespace\">[c18837c64f3317f9]</span> <span class=\"token namespace\">[desktop]</span> <span class=\"token function\">start</span> proxy success</pre></td></tr></table></figure><ol start=\"5\">\n<li>之后让别人直接通过你服务器  <code>ip</code>  + 监听的端口来远程连接你电脑就行。</li>\n</ol>\n<div class=\"note primary\">\n<p>例如： <code>192.168.0.5:25565</code></p>\n</div>\n<hr>\n<p><em>END</em></p>\n",
            "tags": [
                "原创",
                "frp"
            ]
        },
        {
            "id": "http://yunyat.cloud/miscellaneous/issues/frp%E4%B9%8B%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/",
            "url": "http://yunyat.cloud/miscellaneous/issues/frp%E4%B9%8B%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/",
            "title": "frp之内网穿透",
            "date_published": "2023-05-08T04:12:18.000Z",
            "content_html": "<p><img data-src=\"https://s1.ax1x.com/2023/05/01/p98QaIP.jpg\" alt=\"p98QaIP.jpg\"></p>\n<a id=\"more\"></a>\n<h3 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h3>\n<hr>\n<p>众所周知，在我大内网环境里，你没有公网 ip 想要别人能够访问你电脑的内容是不可能的（除非你利用一些第三方的软件，但是第三方软件往往有一些限制，比如带宽啊，流量啊，收费啊等等）</p>\n<p>而你利用 frp 反向代理就可以在你没有公网 ip 的情况下实现别人访问你电脑的内容。</p>\n<ul>\n<li>\n<p>frp 是什么</p>\n<p>用百度百科的解释</p>\n<blockquote>\n<p>高性能反向代理应用<br>\n frp 是一个高性能的反向代理应用，支持 tcp, udp, http, https 协议。</p>\n</blockquote>\n<p>这是官方的解释</p>\n<blockquote>\n<p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>\n</blockquote>\n</li>\n</ul>\n<p>官方的解释往往有些不是很通俗易懂（毕竟是官方嘛）</p>\n<p>其实 <code>frp</code>  就是利用一台有公网 <code>ip</code>  的服务器来进行端口转发（所以说使用 <code>frp</code>  前你要有一台云服务器或 <code>vps</code> ，因为云服务器或 <code>vps</code>  一般都有公网 <code>ip</code> ），这么说吧，你首先要在云服务器装一个 <code>frps</code> （服务器端的程序），然后再本地装一个 <code>frpc</code> （客户端程序，本地指的是你要访问的内网机器），之后你再配置好他们的端口映射关系（比如说你把云服务器端的 <code>23333</code>  端口开放了，然后在本地把你要访问的服务的端口也打开，就比如说 <code>http</code>  的 <code>80</code>  端口，然后在程序里将它们的映射关系 配置好），这个时候你访问有公网 <code>ip</code>  的服务器的指定端口（上面开放的 <code>23333</code> ），服务器端的程序 <code>frps</code>  就会把这个访问请求转发到它映射到客户端的端口（上面说的 <code>80</code> ），这个时候你就实现了在没有公网 <code>ip</code>  的情况下让别人访问你电脑的内容。</p>\n<p>有人会说你云服务器不是有公网 <code>ip</code>  嘛，为什么不用？</p>\n<p>首先，你对这个服务器的公网 <code>ip</code>  没有使用权，你有使用这个服务器的权力，这个公网 <code>ip</code>  的使用权在服务器手里。</p>\n<hr>\n<h4 id=\"具体如何操作\"><a class=\"markdownIt-Anchor\" href=\"#具体如何操作\">#</a> 具体如何操作</h4>\n<blockquote>\n<p>2023.5.22 更新，最近是真的懒，一点都不想动</p>\n</blockquote>\n<p>1. 首先你要前往它的官方 GitHub 库下载最新的程序（<s>废话</s>）</p>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2ZhdGVkaWVyL2ZycC9yZWxlYXNlcw==\">Releases · fatedier/frp (github.com)</span></p>\n</blockquote>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9I2ZnJ.png\" alt=\"p9I2ZnJ.png\"></p>\n<p>可以看到，有很多版本，至于下哪个，看你要穿透的内网主机和当作穿透服务器的云服务器是什么 <code>cpu</code>  架构了，比如我电脑 <code>windows</code>  系统， <code>cpu</code>  是 <code>x64</code>  架构的，那就选 <code>windows_amd64的</code> ，而我的服务器是装的 <code>Linux</code> ， <code>cpu</code>  是 <code>x86_64</code>  架构，那就选 <code>Linux_amd64</code> ，至于 <code>macos</code>  的，我身边也没有人用 <code>macos</code>  系统的，所以请自行查阅资料吧</p>\n<p>在命令行使用命令查看</p>\n<blockquote>\n<p>Windows</p>\n</blockquote>\n<p>在 <code>cmd</code> （命令提示框中）中输入： <code>systeminfo</code></p>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9IREPP.png\" alt=\"p9IREPP.png\"></p>\n<blockquote>\n<p>Linux</p>\n</blockquote>\n<p>同样在命令行中输入： <code>lscpu</code></p>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9I4tYR.png\" alt=\"p9I4tYR.png\"></p>\n<p>至于 <code>x64</code>  和 <code>x86_64</code> ，它们其实是指 <code>cpu</code>  的指令集架构， <code>cpu</code>  指令集目前主要是分为两大类</p>\n<p>​\t1. 复杂指令集</p>\n<p>​\t\t复杂指令集主要是 <code>Intel</code>  和 <code>AMD</code>  的 <code>cpu</code>  在使用，复杂指令集分为 <code>x86</code> 、 <code>x64</code> ，如果你的电脑是 <code>32</code>  位操作系统（现在应该没有用 <code>32</code>  位系统的吧），那就是 <code>x86</code>  的（为什么叫 <code>x86</code>  而不是 <code>x32</code> , 那是因为早期的处理器名称都是以数字 <code>86</code>  结尾，因此其架构被称为 <code>x86</code> ），如果是 <code>64</code>  位系统，那就是 <code>x64</code></p>\n<p>​\t\t现在复杂指令集架构的 <code>cpu</code>  大多应用在 <code>pc</code>  机上，包括 <code>Windows</code> 、 <code>Linux</code> 、 <code>MacOS</code></p>\n<p>​\t2. 简单指令集</p>\n<p>​\t\t简单指令集是 <code>arm</code>  的一种架构，这种架构的 <code>cpu</code>  主要是应用在手机上，包括安卓和苹果</p>\n<p>知道改下哪个架构的程序之后就可以下载了，但是注意，程序下载下来之后是包含服务器端和客户端的， <code>frps</code>  是服务器端的程序， <code>frpc</code>  是客户端的程序</p>\n<p>比如说你下载了 <code>windouws</code>  的程序，它里面是包含服务器端程序和客户端程序，看你需要哪一端的程序吧，另外一端可以删了（当时我也是在这卡了一会儿）</p>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9Ior0U.png\" alt=\"p9Ior0U.png\"></p>\n<h4 id=\"关于配置问题\"><a class=\"markdownIt-Anchor\" href=\"#关于配置问题\">#</a> 关于配置问题</h4>\n<p><b>注意：由于官方配置文件发生改变，以下配置文件仅供参考</b></p>\n<p>配置文件是 *.ini 为结尾的文件，服务器端的程序和客户端的程序都要配置</p>\n<blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9nb2ZycC5vcmcvemgtY24vZG9jcy9leGFtcGxlcy9zc2gv\">通过 SSH 访问内网机器 | frp (gofrp.org</span> 官方配置参考</p>\n</blockquote>\n<ul>\n<li>客户端配置</li>\n</ul>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9I7Us0.png\" alt=\"p9I7Us0.png\"></p>\n<ul>\n<li>\n<p>服务器端配置</p>\n<p><img data-src=\"https://s1.ax1x.com/2023/05/22/p9I72sx.png\" alt=\"p9I72sx.png\"></p>\n</li>\n</ul>\n<h4 id=\"新版配置文件模板\"><a class=\"markdownIt-Anchor\" href=\"#新版配置文件模板\">#</a> 新版配置文件模板</h4>\n<p>服务器端（frps.toml）:</p>\n<figure class=\"highlight toml\"><figcaption data-lang=\"TOML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># bindPort 是 frp 程序通信使用的端口</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key property\">bindPort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">7000</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># token 用于验证客户端的正确性</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key property\">token</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">123456</span></pre></td></tr></table></figure><p>客户端（frpc.toml）：</p>\n<figure class=\"highlight toml\"><figcaption data-lang=\"TOML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># serverAddr 是你公网服务器的 IP</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key property\">serverAddr</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"x.x.x.x\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># serverPort 是客户端和服务器端的通信端口，客户端和服务器端要保持一致</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key property\">serverPort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">7000</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># token 填和服务器端相同的 token</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key property\">token</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">123456</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token table class-name\">proxies</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 你要穿透的服务的名称，如：ssh</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token key property\">name</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"ssh\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 穿透使用的协议 tcp or udp</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token key property\">type</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"tcp\"</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 本机 ip，默认即可</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token key property\">localIP</span> <span class=\"token punctuation\">=</span> <span class=\"token string\">\"127.0.0.1\"</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 本机的要穿透服务端口</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token key property\">localPort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">22</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 服务器的访问端口</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token key property\">remotePort</span> <span class=\"token punctuation\">=</span> <span class=\"token number\">8022</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 可以配置多个服务，只需更改客户端即可</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 多个服务之间 name 的名字需要不同，localPort 和 remotePort 都需要与之前的不同</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># [[proxies]]</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># name = \"\"</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># type = \"\"</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># localIP = \"\"</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># localPort = \"\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># remotePort =</span></pre></td></tr></table></figure><h4 id=\"启动-frp\"><a class=\"markdownIt-Anchor\" href=\"#启动-frp\">#</a> 启动 frp</h4>\n<h5 id=\"frps\"><a class=\"markdownIt-Anchor\" href=\"#frps\">#</a> frps</h5>\n<ol>\n<li>安装  <code>systemd</code></li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 使用 yum 安装，适用于 CentOS 和 RHEL</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>yum <span class=\"token function\">install</span> systemd</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 使用 apt 安装，适用于 Debian 和 Ubuntu</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">apt</span> <span class=\"token function\">install</span> systemd</pre></td></tr></table></figure><ol start=\"2\">\n<li>创建 frps.service 文件</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 使用 vim 在 /etc/systemd/system/ 下创建</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> /etc/systemd/system/frps.service</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 如报错可以试一下取消 sudo</span></pre></td></tr></table></figure><p>然后写入以下内容：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>Unit<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 服务名称，可自定义</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Description <span class=\"token operator\">=</span> frp server</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>After <span class=\"token operator\">=</span> network.target syslog.target</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Wants <span class=\"token operator\">=</span> network.target</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>Service<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Type <span class=\"token operator\">=</span> simple</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 启动 frps 的命令，需修改为您的 frps 的安装路径，如：/root/frp/frps -c /root/frp/frps.toml</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ExecStart <span class=\"token operator\">=</span> /path/to/frps <span class=\"token parameter variable\">-c</span> /path/to/frps.toml</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">[</span>Install<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>WantedBy <span class=\"token operator\">=</span> multi-user.target</pre></td></tr></table></figure><p>配置完之后就可以直接使用  <code>systemctl start frps</code>  来启动  <code>frps</code>  服务</p>\n<h5 id=\"frpc\"><a class=\"markdownIt-Anchor\" href=\"#frpc\">#</a> frpc</h5>\n<p>在 <code>frp</code>  的安装目录下输入以下命令：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./frpc <span class=\"token parameter variable\">-c</span> ./frpc.toml</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 如果出现了 Illegal instruction 报错那就是你版本没选对</span></pre></td></tr></table></figure><h4 id=\"常用的-systemctl-命令\"><a class=\"markdownIt-Anchor\" href=\"#常用的-systemctl-命令\">#</a> 常用的  <code>systemctl </code>  命令：</h4>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 启动程序</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>systemctl start frps</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 查看程序状态</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>systemctl status frps</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 停止程序</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>systemctl stop frps</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 重新启动</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>systemctl restart frps</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 开机自启</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>systemctl <span class=\"token builtin class-name\">enable</span> frps</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 关闭开机启动</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>systemctl disable frps</pre></td></tr></table></figure><hr>\n<p>END</p>\n",
            "tags": [
                "原创",
                "frp"
            ]
        }
    ]
}