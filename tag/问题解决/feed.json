{
    "version": "https://jsonfeed.org/version/1",
    "title": "上善若水 • All posts by \"问题解决\" tag",
    "description": "若能避开猛烈的欢喜，自然也不会有悲痛的来袭.",
    "home_page_url": "http://yunyat.cloud",
    "items": [
        {
            "id": "http://yunyat.cloud/MyCodingBook/%E5%90%8E%E7%AB%AF/java/frame/SpringBoot%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatisPlus%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/",
            "url": "http://yunyat.cloud/MyCodingBook/%E5%90%8E%E7%AB%AF/java/frame/SpringBoot%E6%8C%81%E4%B9%85%E5%B1%82%E6%A1%86%E6%9E%B6/MyBatisPlus%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/",
            "title": "MyBatisPlus疑难杂症",
            "date_published": "2024-11-08T08:35:36.000Z",
            "content_html": "<ol>\n<li>无效绑定</li>\n</ol>\n<p><img data-src=\"https://figurebed.yunyat.cloud/Code/20240524154755.png\" alt=\"image-20240524154749356\"></p>\n<p>解决方法：</p>\n<p>在  <code>MyBatisPlusConfig</code>  中添加以下代码：</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@Resource</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">DataSource</span> dataSource<span class=\"token punctuation\">;</span><span class=\"token comment\">// 通过 @Resource 注解自动注入数据源。该数据源将用于数据库连接。 </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>     * 配置并返回 MybatisSqlSessionFactoryBean 实例。</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     * 这个工厂 Bean 用于创建 Mybatis 的 SqlSessionFactory，它是 Mybatis 的核心组件，</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     * 提供了与数据库交互的能力。</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>     *</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * @return MybatisSqlSessionFactoryBean 配置实例</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token annotation punctuation\">@Bean</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MybatisSqlSessionFactoryBean</span> <span class=\"token function\">mybatisSqlSessionFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 创建 MybatisSqlSessionFactoryBean 实例</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token class-name\">MybatisSqlSessionFactoryBean</span> mybatisPlus <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MybatisSqlSessionFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// 设置数据源，数据源是 Mybatis 与数据库交互的基础，这里将之前配置的数据源设置给 SqlSessionFactoryBean</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        mybatisPlus<span class=\"token punctuation\">.</span><span class=\"token function\">setDataSource</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// 返回配置好的 MybatisSqlSessionFactoryBean 实例</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> mybatisPlus<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"2\">\n<li>SQL 模式  <code>only_full_group_by</code></li>\n</ol>\n<p><img data-src=\"https://figurebed.yunyat.cloud/Code/20240529100707.png\" alt=\"image-20240529100700837\"></p>\n<p>解决方法：</p>\n<p><code>select</code>  字段后面的需要被聚合函数包裹，或  <code>group by</code>  后面的字段同  <code>select</code>  后面的字段一致</p>\n<p>例：</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 对应的 SQL 语句</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// select count(id) as count, max(name), max(age) from user group by age;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>queryWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count(id) as count\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"max(name)\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"max(age)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 或</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// select id, name, age from user group by id, name, age;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>queryWrapper<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><hr>\n<p><em>END</em></p>\n",
            "tags": [
                "原创",
                "java",
                "mybatis",
                "mybatisplus",
                "问题解决"
            ]
        }
    ]
}