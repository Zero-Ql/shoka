{
    "version": "https://jsonfeed.org/version/1",
    "title": "上善若水 • All posts by \"ssh\" tag",
    "description": "若能避开猛烈的欢喜，自然也不会有悲痛的来袭.",
    "home_page_url": "http://yunyat.cloud",
    "items": [
        {
            "id": "http://yunyat.cloud/linux/Win%E8%87%B3Linux%E7%9A%84%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/",
            "url": "http://yunyat.cloud/linux/Win%E8%87%B3Linux%E7%9A%84%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/",
            "title": "Win至Linux的免密登录",
            "date_published": "2023-09-09T15:30:41.000Z",
            "content_html": "<h4 id=\"配置-windows-端\"><a class=\"markdownIt-Anchor\" href=\"#配置-windows-端\">#</a> 配置 Windows 端</h4>\n<ol>\n<li>先在 Windows 下生成公钥文件</li>\n</ol>\n<p>使用 win+R 打开运行对话框，输入 cmd 打开命令提示符（或者随便打开一个文件夹 --&gt; 右键 --&gt; 在终端中打开）</p>\n<p>输入以下命令：</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ssh-keygen <span class=\"token operator\">-</span>t rsa</pre></td></tr></table></figure><p>之后无脑回车确定</p>\n<p><img data-src=\"https://s1.ax1x.com/2023/09/09/pPcuprT.png\" alt=\"powershell1\"></p>\n<ol start=\"2\">\n<li>找到你默认存放公钥的位置</li>\n</ol>\n<p><img data-src=\"https://s1.ax1x.com/2023/09/09/pPcuPZF.png\" alt=\"powershell2\"></p>\n<ol start=\"3\">\n<li>将你生成的公钥文件传到 Linux 服务器上</li>\n</ol>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scp 你公钥存放的位置<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh/id_rsa<span class=\"token punctuation\">.</span>pub  你要登录的用户名@你服务器的ip:~<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh</pre></td></tr></table></figure><p>上传完毕之后 Windows 端的配置就完成了</p>\n<h4 id=\"配置-linux-端\"><a class=\"markdownIt-Anchor\" href=\"#配置-linux-端\">#</a> 配置 Linux 端</h4>\n<ol>\n<li>先登录到 Linux 服务器</li>\n</ol>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ssh root@你服务器的ip</pre></td></tr></table></figure><p>在输入密码后就能登录上去</p>\n<ol start=\"2\">\n<li>在当前用户家目录下找到  <code>.ssh</code>  文件夹</li>\n</ol>\n<p>使用以下命令查看：</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">ls</span> <span class=\"token parameter variable\">-a</span></pre></td></tr></table></figure><p>然后使用以下命令将  <code>id_rsa.pub</code>  文件的内容追加到  <code>authorized_keys</code>  中</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">cat</span> id_rsa.pub <span class=\"token operator\">>></span> authorized_keys</pre></td></tr></table></figure><ol start=\"3\">\n<li>然后用  <code>chmod</code>  修改文件的权限</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token number\">600</span> .ssh/authorized_keys</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">chmod</span> <span class=\"token number\">700</span> .ssh</pre></td></tr></table></figure><h5 id=\"修改ssh的配置文件\"><a class=\"markdownIt-Anchor\" href=\"#修改ssh的配置文件\">#</a> 修改 SSH 的配置文件</h5>\n<ol>\n<li>使用以下命令进入  <code>ssh</code>  的配置文件</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> /etc/ssh/sshd_config</pre></td></tr></table></figure><ol start=\"2\">\n<li>找到下面的三句不被注释掉，没有直接添加</li>\n</ol>\n<p>温馨提示：可以使用  <code>斜杠“/”</code>  来快速查找</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>RSAAuthentication <span class=\"token function\">yes</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>PubkeyAuthentication <span class=\"token function\">yes</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>AuthorizedKeysFile .ssh/authorized_keys</pre></td></tr></table></figure><p>然后  <code>:wq</code>  保存并退出</p>\n<ol start=\"3\">\n<li>使用以下命令重启 SSH 服务</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">service</span> sshd restart</pre></td></tr></table></figure><h4 id=\"测试免密登录\"><a class=\"markdownIt-Anchor\" href=\"#测试免密登录\">#</a> 测试免密登录</h4>\n<p>在 Windows 的 power shell 上输入以下命令：</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ssh root@你服务器的ip</pre></td></tr></table></figure><p><img data-src=\"https://s1.ax1x.com/2023/09/09/pPcQcQI.png\" alt=\"powershell3\"></p>\n<p>可以看到，直接连上了服务器，到这你的免密登录就成功了</p>\n<h4 id=\"使用指定端口登录\"><a class=\"markdownIt-Anchor\" href=\"#使用指定端口登录\">#</a> 使用指定端口登录</h4>\n<p>一般来说，为了服务器的安全起见，我们都会更改 SSH 的默认登录端口</p>\n<p>可以在服务器 ip 后加 -p 参数来指定要使用的端口</p>\n<hr>\n<p>END</p>\n",
            "tags": [
                "原创",
                "电脑技术",
                "SSH"
            ]
        }
    ]
}