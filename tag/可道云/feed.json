{
    "version": "https://jsonfeed.org/version/1",
    "title": "上善若水 • All posts by \"可道云\" tag",
    "description": "若能避开猛烈的欢喜，自然也不会有悲痛的来袭.",
    "home_page_url": "http://yunyat.cloud",
    "items": [
        {
            "id": "http://yunyat.cloud/linux/%E5%8F%AF%E9%81%93%E4%BA%91%E6%A1%8C%E9%9D%A2%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/",
            "url": "http://yunyat.cloud/linux/%E5%8F%AF%E9%81%93%E4%BA%91%E6%A1%8C%E9%9D%A2%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/",
            "title": "可道云桌面搭建笔记",
            "date_published": "2023-09-08T09:10:26.000Z",
            "content_html": "<h4 id=\"可道云桌面搭建\"><a class=\"markdownIt-Anchor\" href=\"#可道云桌面搭建\">#</a> 可道云桌面搭建</h4>\n<ol>\n<li>先创建 dockerfile-two 及 kod-two 文件夹（因为我之前搭过一遍，但是忘记截图了，所以重搭一遍，防止文件名重复所以用 -two ）</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> dockerfile-two/kod-two</pre></td></tr></table></figure><p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP6lYIe.png\" alt=\"pP6lYIe.png\"></p>\n<ol start=\"2\">\n<li>使用 scp 将所必要的文件传到服务器上（请务必不要照抄我的命令）</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"><span>l</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">scp</span> .<span class=\"token punctuation\">\\</span>source<span class=\"token punctuation\">\\</span>* root@8.222.153.91:/root/dockerfile-two/kod-two/</pre></td></tr></table></figure><ul>\n<li>实在不会上传那就用下面的这条命令吧（复制粘贴总会吧？）</li>\n</ul>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> https://zero-li.fun/资源/source.tar <span class=\"token punctuation\">;</span> <span class=\"token function\">tar</span> <span class=\"token parameter variable\">-xf</span> source.tar <span class=\"token punctuation\">;</span> <span class=\"token function\">mv</span> <span class=\"token parameter variable\">-f</span> source/* ./ <span class=\"token punctuation\">;</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> sour*</pre></td></tr></table></figure><p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP61SeK.png\" alt=\"pP61SeK.png\"></p>\n<ol start=\"3\">\n<li>使用 vim 创建 dockerfile 文件并填入以下内容：</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> dockerfile</pre></td></tr></table></figure><pre><code>FROM centos:centos7    # 改为你的基础镜像\n\nADD Centos-7.repo /etc/yum.repos.d/\n\nADD epel-7.repo /etc/yum.repos.d/\n\nRUN yum -y install nginx php-fpm php-gd php-mbstring unzip\n\nRUN sed -i '/^user/c user=nginx' /etc/php-fpm.d/www.conf\n\nRUN sed -i '/^group/c group=nginx' /etc/php-fpm.d/www.conf\n\nCOPY nginx.conf /etc/nginx/nginx.conf\n\nRUN mkdir /code\n\nWORKDIR /code/\n\nCOPY kodexplorer4.40.zip .\n\nRUN unzip kodexplorer4.40.zip\n\nRUN chown -R nginx.nginx .\n\nADD init.sh /init.sh\n\nEXPOSE 80\n\nENTRYPOINT [&quot;/bin/bash&quot;,&quot;/init.sh&quot;]\n</code></pre>\n<p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP68PxA.png\" alt=\"pP68PxA.png\"></p>\n<p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP68krt.png\" alt=\"pP68krt.png\"></p>\n<ol start=\"4\">\n<li>然后用 vim 创建一个名为 <span class=\"exturl\" data-url=\"aHR0cDovL2luaXQuc2g=\">init.sh</span> 的 shell 脚本并写入以下内容：</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">vim</span> init.sh</pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token shebang important\">#!/bin/bash</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>php-fpm <span class=\"token parameter variable\">-D</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">>></span> /etc/nginx/nginx.conf</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>nginx <span class=\"token parameter variable\">-g</span> <span class=\"token string\">'daemon off;'</span></pre></td></tr></table></figure><p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP68UG4.png\" alt=\"pP68UG4.png\"></p>\n<ol start=\"5\">\n<li>之后执行以下命令</li>\n</ol>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">docker</span> build <span class=\"token parameter variable\">-t</span> kod:v1 <span class=\"token builtin class-name\">.</span> <span class=\"token punctuation\">;</span> <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-itd</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">25567</span>:80 kod:v1 <span class=\"token string\">'#testtest'</span></pre></td></tr></table></figure><p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP68sZ6.png\" alt=\"pP68sZ6.png\"></p>\n<ol start=\"6\">\n<li>\n<p>在浏览器访问</p>\n<pre><code>你的IP:25567/kodexplorer4.40/index.php\n</code></pre>\n</li>\n</ol>\n<p><img data-src=\"https://s1.ax1x.com/2023/09/08/pP68ydK.png\" alt=\"pP68ydK.png\"></p>\n<hr>\n<p>示例：<span class=\"exturl\" data-url=\"aHR0cDovLzguMjIyLjE1My45MToyNTU2OS9rb2RleHBsb3JlcjQuNDAvaW5kZXgucGhwP3VzZXIvbG9naW4=\">可道云桌面</span></p>\n<p>END</p>\n",
            "tags": [
                "原创",
                "可道云"
            ]
        }
    ]
}